import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.util.NoSuchElementException;

public class InFile extends Input
{
	private ObjectInputStream input; 
	private OutFile output = new OutFile(); 
	private File file = new File(""); 
	
	//This will return null if it cannot read the file
	public Object Read(String fileName)
	{
		Object inputObj = new Object(); 
		
		if (!file.mkdirs())
		{
			//Error
			output.WriteError("Could not create parent directory for file"); 
		}

		try
		{
			if (!file.exists())
			{
				output.WriteError("Cannot read file, file does not exist");
			}
			
			input = new ObjectInputStream(new FileInputStream(fileName)); 
			inputObj = input.readObject(); 
		}
		catch(NoSuchElementException ex)
		{
			output.WriteError(ex.getMessage());
		}
		catch(FileNotFoundException ex)
		{
			output.WriteError("Cannot read file, file does not exist.");
		}
		catch(IOException ex)
		{
			output.WriteError("Cannot read file. " + ex.getMessage());
		} 
		catch (ClassNotFoundException ex) 
		{
			output.WriteError("Cannot cast object to proper type: " + ex.getMessage());
		}
		
		return inputObj; 
	}
}
