import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;


public class OutFile extends Output
{
	private ObjectOutputStream output; 
	private File logFile = new File(getLogFilePath()); 
	private File errorLog = new File(getErrorFilePath()); 
	private File configFile = new File(getConfigFilePath()); 
	
	private static OutFile outFile; 
	private OutConsole console = new OutConsole(); 
	
	private OutFile(){}
	
	public static OutFile getInstance()
	{
		if (outFile == null)
		{
			outFile = new OutFile(); 
		}
		return outFile; 
	}
	
	public void write(String message)
	{
		this.write(logFile, message);
	}
	
	public void write(String[] messages)
	{
		this.write(logFile, messages);
	}
	
	public void write(Object configuration)
	{
		this.write(configFile, configuration);
	}
	
	public void writeError(String message)
	{
		this.write(errorLog, message); 
	}
	
	private void write(File file, String message)
	{
		String[] messages = {message}; 
		write(file, messages); 
	}
	
	private void write(File file, Object messages)
	{
		if (!logFile.getParentFile().mkdirs())
		{
			//Error
		}

		try
		{
			if (!logFile.exists())
			{
				//Make file 
				logFile.createNewFile(); 
			}
			
			
		}
		catch(Exception ex)
		{
			console.writeError(ex.getMessage());
		}
	}
	
	private void writeString(File file, String message)
	{
		
	}
	
	private void writeObject(File file, Object messages) throws FileNotFoundException, IOException
	{
		output = new ObjectOutputStream(new FileOutputStream(file.getAbsolutePath())); 
		
		output.writeObject(dateTimeString + ": " + messages);
	}
}
